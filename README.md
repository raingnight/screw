# æœ¬é¡¹ç›® Fork è‡ª [smallbun/screw](https://gitee.com/leshalv/screw.git) æ„Ÿè°¢ä½œè€…å¼€æº

<p align="center">
  <a href="https://github.com/pingfangushi/screw">
   <img alt="screw-logo" src="https://images.gitee.com/uploads/images/2020/0728/155335_59a712d2_1407605.png">
  </a>
</p>

<p align="center">ğŸ’• ä¼ä¸šçº§å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸€é¢—æ°¸ä¸ç”Ÿé”ˆçš„èºä¸é’‰ã€‚</p>

<p align="center">
    <a href="https://github.com/pingfangushi/screw/blob/master/LICENSE">
        <img src="https://img.shields.io/badge/license-LGPL3-blue.svg" alt="LGPL3">
    </a>
    <a href="https://github.com/pingfangushi/screw">
        <img src="https://img.shields.io/badge/link-wiki-green.svg?style=flat-square" alt="wiki">
    </a>
    <a href="https://search.maven.org/search?q=cn.sunofjune.screw">
       <img alt="Maven Central" src="https://img.shields.io/maven-central/v/cn.sunofjune.screw/screw-core">
    </a>
    <a href="#">
        <img src="https://img.shields.io/badge/JDK-1.8+-green.svg" alt="JDK Version">
    </a>
    <a href="#">
        <img src="https://img.shields.io/badge/MAVEN-3.0+-green.svg" alt="JDK Version">
    </a>
</p>

> ğŸš€ screw (èºä¸é’‰) è‹±:[`skruË`]  ~ ç®€æ´å¥½ç”¨çš„æ•°æ®åº“è¡¨ç»“æ„æ–‡æ¡£ç”Ÿæˆå·¥å…·

## ç®€ä»‹

åŸæœ‰çš„ [smallbun/screw](https://gitee.com/leshalv/screw.git) åä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œå¸®åŠ©äº†ä¸å°‘äººå¿«é€Ÿç”Ÿæˆäº†
æ•°æ®åº“æ–‡æ¡£ï¼Œä½†æ˜¯ç›®å‰ç”±äºå›½äº§åŒ–é€‚é…çš„è¶‹åŠ¿ï¼Œé€æ¸åˆ‡æ¢åˆ°è¾¾æ¢¦æ•°æ®åº“ä¹‹ç±»çš„å›½äº§æ•°æ®åº“ä¹‹åï¼Œå‘ç°ä¸æ”¯æŒDM8
çœ‹åˆ°åŸä»“åº“å·²ç»å¾ˆä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œäºæ˜¯ fork äº†ä¸€ä»½å‡ºæ¥ï¼Œè¿›è¡Œç»´æŠ¤ã€‚ç›®å‰å·²æ–°å¢è¾¾æ¢¦æ•°æ®åº“çš„æ”¯æŒã€‚

## ç‰¹ç‚¹

+ ç®€æ´ã€è½»é‡ã€è®¾è®¡è‰¯å¥½

+ å¤šæ•°æ®åº“æ”¯æŒ
+ å¤šç§æ ¼å¼æ–‡æ¡£
+ çµæ´»æ‰©å±•
+ æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿

## æ•°æ®åº“æ”¯æŒ

- [x] MySQL
- [x] MariaDB
- [x] TIDB
- [x] Oracle
- [x] SqlServer
- [x] PostgreSQL
- [x] Cache DBï¼ˆ2016ï¼‰
- [x] è¾¾æ¢¦ ï¼ˆDM8ï¼‰
- [ ] H2 ï¼ˆå¼€å‘ä¸­ï¼‰
- [ ] DB2 ï¼ˆå¼€å‘ä¸­ï¼‰
- [ ] HSQL ï¼ˆå¼€å‘ä¸­ï¼‰
- [ ] SQLiteï¼ˆå¼€å‘ä¸­ï¼‰
- [ ] ç€šé«˜ï¼ˆå¼€å‘ä¸­ï¼‰
- [ ] è™šè°· ï¼ˆå¼€å‘ä¸­ï¼‰
- [ ] äººå¤§é‡‘ä»“ï¼ˆå¼€å‘ä¸­ï¼‰

## æ–‡æ¡£ç”Ÿæˆæ”¯æŒ

- [x] html
- [x] word
- [x] markdown

## æ–‡æ¡£æˆªå›¾

+ **html**

<p align="center">
   <img alt="HTML" src="https://images.gitee.com/uploads/images/2020/0622/161414_74cd0b68_1407605.png">
</p>
<p align="center">
   <img alt="screw-logo" src="https://images.gitee.com/uploads/images/2020/0622/161723_6da58c41_1407605.png">
</p>

+ **word**

<p align="center">
   <img alt="word" src="https://images.gitee.com/uploads/images/2020/0625/200946_1dc0717f_1407605.png">
</p>

+ **markdwon**

<p align="center">
   <img alt="markdwon" src="https://images.gitee.com/uploads/images/2020/0625/214749_7b15d8bd_1407605.png">
</p>
<p align="center">
   <img alt="markdwon" src="https://images.gitee.com/uploads/images/2020/0625/215006_3601e135_1407605.png">
</p>

## ä½¿ç”¨æ–¹å¼

### æ™®é€šæ–¹å¼

+ **å¼•å…¥ä¾èµ–**

```xml

<dependency>
    <groupId>cn.sunofjune.screw</groupId>
    <artifactId>screw-core</artifactId>
    <version>${lastVersion}</version>
</dependency>
```

+ **ç¼–å†™ä»£ç **

``` java
/**
 * æ–‡æ¡£ç”Ÿæˆ
 */
void documentGeneration() {
   //æ•°æ®æº
   HikariConfig hikariConfig = new HikariConfig();
   hikariConfig.setDriverClassName("com.mysql.cj.jdbc.Driver");
   hikariConfig.setJdbcUrl("jdbc:mysql://127.0.0.1:3306/database");
   hikariConfig.setUsername("root");
   hikariConfig.setPassword("password");
   //è®¾ç½®å¯ä»¥è·å–tables remarksä¿¡æ¯
   hikariConfig.addDataSourceProperty("useInformationSchema", "true");
   hikariConfig.setMinimumIdle(2);
   hikariConfig.setMaximumPoolSize(5);
   DataSource dataSource = new HikariDataSource(hikariConfig);
   //ç”Ÿæˆé…ç½®
   EngineConfig engineConfig = EngineConfig.builder()
         //ç”Ÿæˆæ–‡ä»¶è·¯å¾„
         .fileOutputDir(fileOutputDir)
         //æ‰“å¼€ç›®å½•
         .openOutputDir(true)
         //æ–‡ä»¶ç±»å‹
         .fileType(EngineFileType.HTML)
         //ç”Ÿæˆæ¨¡æ¿å®ç°
         .produceType(EngineTemplateType.freemarker)
         //è‡ªå®šä¹‰æ–‡ä»¶åç§°
         .fileName("è‡ªå®šä¹‰æ–‡ä»¶åç§°").build();

   //å¿½ç•¥è¡¨
   ArrayList<String> ignoreTableName = new ArrayList<>();
   ignoreTableName.add("test_user");
   ignoreTableName.add("test_group");
   //å¿½ç•¥è¡¨å‰ç¼€
   ArrayList<String> ignorePrefix = new ArrayList<>();
   ignorePrefix.add("test_");
   //å¿½ç•¥è¡¨åç¼€    
   ArrayList<String> ignoreSuffix = new ArrayList<>();
   ignoreSuffix.add("_test");
   ProcessConfig processConfig = ProcessConfig.builder()
         //æŒ‡å®šç”Ÿæˆé€»è¾‘ã€å½“å­˜åœ¨æŒ‡å®šè¡¨ã€æŒ‡å®šè¡¨å‰ç¼€ã€æŒ‡å®šè¡¨åç¼€æ—¶ï¼Œå°†ç”ŸæˆæŒ‡å®šè¡¨ï¼Œå…¶ä½™è¡¨ä¸ç”Ÿæˆã€å¹¶è·³è¿‡å¿½ç•¥è¡¨é…ç½®	
		 //æ ¹æ®åç§°æŒ‡å®šè¡¨ç”Ÿæˆ
		 .designatedTableName(new ArrayList<>())
		 //æ ¹æ®è¡¨å‰ç¼€ç”Ÿæˆ
		 .designatedTablePrefix(new ArrayList<>())
		 //æ ¹æ®è¡¨åç¼€ç”Ÿæˆ	
		 .designatedTableSuffix(new ArrayList<>())
         //å¿½ç•¥è¡¨å
         .ignoreTableName(ignoreTableName)
         //å¿½ç•¥è¡¨å‰ç¼€
         .ignoreTablePrefix(ignorePrefix)
         //å¿½ç•¥è¡¨åç¼€
         .ignoreTableSuffix(ignoreSuffix).build();
   //é…ç½®
   Configuration config = Configuration.builder()
         //ç‰ˆæœ¬
         .version("1.0.0")
         //æè¿°
         .description("æ•°æ®åº“è®¾è®¡æ–‡æ¡£ç”Ÿæˆ")
         //æ•°æ®æº
         .dataSource(dataSource)
         //ç”Ÿæˆé…ç½®
         .engineConfig(engineConfig)
         //ç”Ÿæˆé…ç½®
         .produceConfig(processConfig)
         .build();
   //æ‰§è¡Œç”Ÿæˆ
   new DocumentationExecute(config).execute();
}
```

### Maven æ’ä»¶

``` xml
<build>
    <plugins>
        <plugin>
            <groupId>cn.sunofjune.screw</groupId>
            <artifactId>screw-maven-plugin</artifactId>
            <version>${lastVersion}</version>
            <dependencies>
                <!-- HikariCP -->
                <dependency>
                    <groupId>com.zaxxer</groupId>
                    <artifactId>HikariCP</artifactId>
                    <version>3.4.5</version>
                </dependency>
                <!--mysql driver-->
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>8.0.20</version>
                </dependency>
            </dependencies>
            <configuration>
                <!--username-->
                <username>root</username>
                <!--password-->
                <password>password</password>
                <!--driver-->
                <driverClassName>com.mysql.cj.jdbc.Driver</driverClassName>
                <!--jdbc url-->
                <jdbcUrl>jdbc:mysql://127.0.0.1:3306/xxxx</jdbcUrl>
                <!--ç”Ÿæˆæ–‡ä»¶ç±»å‹-->
                <fileType>HTML</fileType>
                <!--æ‰“å¼€æ–‡ä»¶è¾“å‡ºç›®å½•-->
                <openOutputDir>false</openOutputDir>
                <!--ç”Ÿæˆæ¨¡æ¿-->
                <produceType>freemarker</produceType>
                <!--æ–‡æ¡£åç§° ä¸ºç©ºæ—¶:å°†é‡‡ç”¨[æ•°æ®åº“åç§°-æè¿°-ç‰ˆæœ¬å·]ä½œä¸ºæ–‡æ¡£åç§°-->
                <fileName>æµ‹è¯•æ–‡æ¡£åç§°</fileName>
                <!--æè¿°-->
                <description>æ•°æ®åº“æ–‡æ¡£ç”Ÿæˆ</description>
                <!--ç‰ˆæœ¬-->
                <version>${project.version}</version>
                <!--æ ‡é¢˜-->
                <title>æ•°æ®åº“æ–‡æ¡£</title>
            </configuration>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

### ä½¿ç”¨æ–‡ç« 

+ [SpringBootæ•´åˆscrewç”Ÿæˆæ•°æ®åº“æ–‡æ¡£](https://my.oschina.net/mdxlcj/blog/4341399)

+ [è¿˜åœ¨æ‰‹åŠ¨æ•´ç†æ•°æ®åº“æ–‡æ¡£ï¼Ÿè¯•è¯•è¿™ä¸ªå·¥å…·](https://mp.weixin.qq.com/s/Bo_U5_cl82hfQ6GmRs2vtA)

+ [å®ç”¨ï¼ä¸€é”®ç”Ÿæˆæ•°æ®åº“æ–‡æ¡£ï¼Œå ªç§°æ•°æ®åº“ç•Œçš„Swagger](https://mp.weixin.qq.com/s/nPwFV7DN8Ogg54_crLlP3g)

### ä½¿ç”¨è§†é¢‘

+ [ä½¿ç”¨screwæ•°æ®åº“æ–‡æ¡£ç”Ÿæˆå·¥å…·å¿«é€Ÿç”Ÿæˆæ•°æ®åº“æ–‡æ¡£](https://www.bilibili.com/video/av456302504/)

+ [å¾®äººäº‹ä¸€é”®ç”Ÿæˆæ•°æ®åº“æ–‡æ¡£ï¼ç‚«ï¼](https://mp.weixin.qq.com/s/rUde6XSGSG0jKuy0Wgf1Mw)

## æ‰©å±•æ¨¡å—

### pojoç”ŸæˆåŠŸèƒ½

#### åŠŸèƒ½ç®€ä»‹

&emsp;&emsp;pojoç”ŸæˆåŠŸèƒ½æ˜¯åŸºäºscrewå»¶ä¼¸å‡ºçš„æ‰©å±•æ¨¡å—,ç›®å‰å¤„äºåˆæ­¥å¼€å‘çš„çŠ¶æ€ã€‚åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­,ç»è¿‡éœ€æ±‚åˆ†æã€å»ºæ¨¡ä¹‹å,å¾€å¾€ä¼šå…ˆåœ¨æ•°æ®åº“ä¸­å»ºè¡¨,å…¶æ¬¡åœ¨è¿›è¡Œä»£ç çš„å¼€å‘ã€‚é‚£ä¹ˆpojoç”ŸæˆåŠŸèƒ½åœ¨è¿™ä¸ªé˜¶æ®µå°±å¯ä»¥å¸®åŠ©å¤§å®¶èŠ‚çœä¸€äº›é‡å¤åŠ³åŠ¨äº†ã€‚ä½¿ç”¨pojoç”ŸæˆåŠŸèƒ½å¯ä»¥ç›´æ¥æ ¹æ®æ•°æ®åº“ç”Ÿæˆå¯¹åº”çš„java
pojoå¯¹è±¡ã€‚è¿™æ ·åç»­çš„ä¿®æ”¹ï¼Œå¼€å‘éƒ½ä¼šå¾ˆæ–¹ä¾¿ã€‚

#### æ•°æ®åº“æ”¯æŒ

- [x] MySQL

#### ä½¿ç”¨æ–¹å¼

+ **å¼•å…¥ä¾èµ–**

```xml

<dependency>
    <groupId>cn.sunofjune.screw</groupId>
    <artifactId>screw-extension</artifactId>
    <version>${lastVersion}</version>
</dependency>
```

+ **ç¼–å†™ä»£ç **

``` java
/**
 * pojoç”Ÿæˆ
 */
void pojoGeneration() {
    //æ•°æ®æº
    HikariConfig hikariConfig = new HikariConfig();
    hikariConfig.setDriverClassName("com.mysql.cj.jdbc.Driver");
    hikariConfig.setJdbcUrl("jdbc:mysql://127.0.0.1:3306/screw");
    hikariConfig.setUsername("screw");
    hikariConfig.setPassword("screw");
    //è®¾ç½®å¯ä»¥è·å–tables remarksä¿¡æ¯
    hikariConfig.addDataSourceProperty("useInformationSchema", "true");
    hikariConfig.setMinimumIdle(2);
    hikariConfig.setMaximumPoolSize(5);
    DataSource dataSource = new HikariDataSource(hikariConfig);

    ProcessConfig processConfig = ProcessConfig.builder()
        //æŒ‡å®šç”Ÿæˆé€»è¾‘ã€å½“å­˜åœ¨æŒ‡å®šè¡¨ã€æŒ‡å®šè¡¨å‰ç¼€ã€æŒ‡å®šè¡¨åç¼€æ—¶ï¼Œå°†ç”ŸæˆæŒ‡å®šè¡¨ï¼Œå…¶ä½™è¡¨ä¸ç”Ÿæˆã€å¹¶è·³è¿‡å¿½ç•¥è¡¨é…ç½®
        //æ ¹æ®åç§°æŒ‡å®šè¡¨ç”Ÿæˆ
        .designatedTableName(new ArrayList<>())
        //æ ¹æ®è¡¨å‰ç¼€ç”Ÿæˆ
        .designatedTablePrefix(new ArrayList<>())
        //æ ¹æ®è¡¨åç¼€ç”Ÿæˆ
        .designatedTableSuffix(new ArrayList<>()).build();

    //è®¾ç½®ç”Ÿæˆpojoç›¸å…³é…ç½®
    PojoConfiguration config = new PojoConfiguration();
    //è®¾ç½®æ–‡ä»¶å­˜æ”¾è·¯å¾„
    config.setPath("/cn/smallbun/screw/");
    //è®¾ç½®åŒ…å
    config.setPackageName("cn.sunofjune.screw");
    //è®¾ç½®æ˜¯å¦ä½¿ç”¨lombok
    config.setUseLombok(false);
    //è®¾ç½®æ•°æ®æº
    config.setDataSource(dataSource);
    //è®¾ç½®å‘½åç­–ç•¥
    config.setNameStrategy(new HumpNameStrategy());
    //è®¾ç½®è¡¨è¿‡æ»¤é€»è¾‘
    config.setProcessConfig(processConfig);
    //æ‰§è¡Œç”Ÿæˆ
    new PojoExecute(config).execute();
}
```

## å¸¸è§é—®é¢˜

+ ç”Ÿæˆåæ–‡æ¡£ä¹±ç ï¼Ÿ

  MySQLï¼šURLåŠ å…¥`?characterEncoding=UTF-8`ã€‚

+ Caused by: java.lang.NoSuchFieldError: VERSION_2_3_30ï¼Ÿ

  æ£€æŸ¥é¡¹ç›®`freemarker`ä¾èµ–ï¼Œè¿™æ˜¯ç”±äºç‰ˆæœ¬è¿‡ä½é€ æˆçš„ï¼Œå‡çº§ç‰ˆæœ¬ä¸º`2.3.30`å³å¯ã€‚

+ java.lang.AbstractMethodError: oracle.jdbc.driver.T4CConnection.getSchema()Ljava/lang/String;

  è¿™æ˜¯å› ä¸ºoracleé©±åŠ¨ç‰ˆæœ¬è¿‡ä½é€ æˆçš„ï¼Œåˆ é™¤æˆ–å±è”½ç›®å‰é©±åŠ¨ç‰ˆæœ¬ï¼Œé©±åŠ¨æ·»åŠ å‡çº§ä¸ºä»¥ä¸‹ç‰ˆæœ¬ï¼š

   ``` xml
   <dependency>
      <groupId>com.oracle.ojdbc</groupId>
      <artifactId>ojdbc8</artifactId>
      <version>19.3.0.0</version>
   </dependency>
   <dependency>
      <groupId>cn.easyproject</groupId>
      <artifactId>orai18n</artifactId>
      <version>12.1.0.2.0</version>
   </dependency>
   ```

+ MySQLæ•°æ®åº“è¡¨å’Œåˆ—å­—æ®µæœ‰è¯´æ˜ã€ç”Ÿæˆæ–‡æ¡£æ²¡æœ‰è¯´æ˜ï¼Ÿ

  URLé“¾æ¥åŠ å…¥`useInformationSchema=true`å³å¯ã€‚

+ java.lang.AbstractMethodError: com.mysql.jdbc.JDBC4Connection.getSchema()Ljava/lang/String;

  è¿™æ˜¯å› ä¸ºmysqlé©±åŠ¨ç‰ˆæœ¬è¿‡ä½é€ æˆçš„ï¼Œå‡çº§mysqlé©±åŠ¨ç‰ˆæœ¬ä¸ºæœ€æ–°å³å¯ã€‚

## å‚ä¸è´¡çŒ®

æ³è¯·çš„å¸Œæœ›æœ‰å…´è¶£çš„åŒå­¦èƒ½å¤Ÿå‚ä¸åˆ°**screw**å»ºè®¾ä¸­æ¥ï¼Œè®©æˆ‘ä»¬å…±åŒå®Œå–„å®ƒï¼Œè®©æˆ‘ä»¬å…±åŒæˆé•¿ï¼Œå¸®åŠ©æ›´å¤šå¼€å‘è€…ï¼Œè§£å†³æ›´å¤šçš„é—®é¢˜ã€‚

## License

<img src='https://www.gnu.org/graphics/lgplv3-with-text-154x68.png' alt="license">

> **screw** æ„Ÿè°¢æ‚¨é€‰æ‹©ç›¸ä¿¡å’Œæ”¯æŒï¼
